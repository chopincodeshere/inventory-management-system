<p-toast></p-toast>
<p-card header="All Orders">
  <div class="card">
    <p-table
      [value]="orders"
      [tableStyle]="{ 'min-width': '50rem' }"
      [scrollable]="true"
      scrollHeight="400px"
     
    >
      <ng-template pTemplate="caption">
        <div class="search-bar">
          <h3 class="m-0">Manage Orders</h3>

          <span class="p-input-icon-left">
            <i class="pi pi-search"></i>
            <input
              pInputText
              class="p-inputtext"
              type="text"
              placeholder="Search..."
              [(ngModel)]="searchQuery"
              (input)="search()"
            />
          </span>
        </div>
      </ng-template>
      <ng-template pTemplate="header">
        <tr>
          <th>Order Id</th>
          <th>Purchaser</th>
          <th>Price</th>
          <th>Quantity</th>
          <th>Actions</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-order>
        <tr>
          <td>{{ order._id }}</td>
          <td>{{ order.customerName }}</td>
          <td>{{ order.paymentDetails.amount }}</td>
          <td>{{ order.items.length }}</td>
          <td>
            <p-button
              icon="pi pi-info-circle"
              [rounded]="true"
              [text]="true"
              severity="info "
              (onClick)="showOrder(order._id)"
            ></p-button>

            <p-confirmPopup></p-confirmPopup>
            <p-button
              icon="pi pi-trash"
              [rounded]="true"
              [text]="true"
              severity="danger "
              (click)="confirm($event, order._id)"
            ></p-button>
          </td>
        </tr>
      </ng-template>
    </p-table>
    <p-paginator (onPageChange)="onPageChange($event)" [first]="first" [rows]="rows" [totalRecords]="totalRecords" [rowsPerPageOptions]="[10, 20, 30]"></p-paginator>
  </div>
</p-card>
